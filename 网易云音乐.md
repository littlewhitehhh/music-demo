#  ç½‘æ˜“äº‘éŸ³ä¹é¡¹ç›®æ€»ç»“

##  åŸºæœ¬ç›®å½•ç»“æ„ï¼ˆrouter-viewï¼‰

* App
  * index
    * discoverï¼ˆå‘ç°éŸ³ä¹ï¼‰
      * recommendï¼ˆä¸ªæ€§æ¨èï¼‰
      * musicListï¼ˆæ­Œå•ï¼‰
      * rankingï¼ˆæ’è¡Œæ¦œï¼‰
      * singerï¼ˆæ­Œæ‰‹ï¼‰
    * videoï¼ˆè§†é¢‘ï¼‰
      * videolistï¼ˆè§†é¢‘ï¼‰
      * mvlistï¼ˆMVï¼‰
    * collectionï¼ˆæ”¶è—ï¼‰
      * collectedAlbumï¼ˆæ”¶è—çš„ä¸“è¾‘ï¼‰
      * collectedSingerï¼ˆæ”¶è—çš„æ­Œæ‰‹ï¼‰
      * collectedVideoï¼ˆæ”¶è—çš„è§†é¢‘å’ŒMVï¼‰
    * recommendMusicï¼ˆæ¯æ—¥æ¨èï¼‰
    * songSheetDetailï¼ˆæ­Œå•è¯¦æƒ…ï¼‰
    * videoDetailï¼ˆè§†é¢‘è¯¦æƒ…ï¼‰
    * albumDetailï¼ˆä¸“è¾‘è¯¦æƒ…ï¼‰
    * singerDtailï¼ˆæ­Œæ‰‹è¯¦æƒ…ï¼‰
    * musicDetailCardï¼ˆæ­Œæ›²æ’­æ”¾è¯¦æƒ…ï¼‰
    * searchï¼ˆæœç´¢ï¼‰

##  componentç»„ä»¶

### header-Bar       ----------    å¤´éƒ¨ç»„ä»¶

*  æ¸…é™¤æ‰€æœ‰cookieå‡½æ•°

```javascript
clearAllCookie() {
    // 
      var date = new Date();
      date.setTime(date.getTime() - 10000);
      var keys = document.cookie.match(/[^ =;]+(?=\=)/g);
      console.log("éœ€è¦åˆ é™¤çš„cookieåå­—ï¼š" + keys);
      if (keys) {
        for (var i = keys.length; i--; )
          document.cookie =
            keys[i] + "=0; expire=" + date.toGMTString() + "; path=/";
      }
    },
```



### aside-Bar    ---------------    ä¾§è¾¹æ ç»„ä»¶

1. é€šè¿‡å–è·¯ç”±ä¸­çš„é¦–åœ°å€ï¼Œç”¨äºä¾§è¾¹æ çš„å¯¼èˆªactive

```javascript
this.activePath = '/' + $route.path.split('/')[1]
```

2. ç”¨è¿‡ç»™menu-itemè®¾ç½®ç‚¹å‡»äº‹ä»¶æ¥ä¿å­˜å½“å‰è¿æ¥æ¿€æ´»çŠ¶æ€

   ```js
   <el-menu-item ...... @click = "saveNavStats('/'+item.path)">
       ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚
   </el-menu-item>
   /**
   -----------------------------------------------------------------*/
   method:{
       saveNavStats(activePath){
           window.sessionStorage.setItem('activePath',activePath);
            //ç‚¹å‡»ä¸åŒé“¾æ¥æ—¶å€™ï¼Œç»™cativePathèµ‹å€¼ ï¼Œå®ç°é«˜äº®æ•ˆæœçš„åŠ¨æ€åˆ‡æ¢
            this.activePath = activePath
       }
   }
   
   created(){
       this.activePath = window.sessionStorage.getItem('activePath')
   }
   ```

3. ä½¿ç”¨watchç›‘å¬vuexä¸­æ•°æ®å˜åŒ–

```javascript
//ç›‘å¬æ”¶è—æ­Œå•çš„å˜åŒ– currentä»£è¡¨æœ€æ–°æ•°æ®
    '$store.state.collectedMusicList'(current){
      this.collectedMusicList = current
      console.log(current);
    },
```

4. ä½¿ç”¨watchç›‘å¬$route.pathï¼ˆå½“å‰è·¯ç”±ï¼‰

```javascript
//ç›‘å¬$route.path
    '$route.path'(current){
       // å–è·¯ç”±ä¸­çš„é¦–åœ°å€ ç”¨äºä¾§è¾¹æ çš„å¯¼èˆªactive
       console.log(this.$route);
      this.defaultActive = "/" + this.$route.path.split("/")[1]; 
    }

/---------------------------------------------------------------------/

//ç›‘å¬è·¯ç”±å˜åŒ–çš„å†™æ³•
	$route(to,from){
		//toè¦å‰å¾€çš„è·¯ç”±ï¼Œfromä»é‚£ä¸ªè·¯ç”±è¿‡æ¥
      	console.log(to.path,from)
      	//å˜åŒ–ä¹‹åæ ¹æ®è‡ªå·±é¡¹ç›®éœ€æ±‚å†™è‡ªèº«çš„é€»è¾‘ä»£ç ï¼Œä¸‹é¢åªæ˜¯ç¤ºä¾‹
      	if(to.path=='/personal'||to.path=='/transfer'){
        	this.isHeader=false
      	}else {
        	this.isHeader=true
      	}
```

###  nav-Bar  ----------   è·¯ç”±æ¨¡å—é¡µé¢å¤´éƒ¨å¯¼èˆªæ¨¡å—

1. **é—®é¢˜**ï¼šcurrentIndexå­˜åœ¨äº†sessionstorageä¸­,å¯¼è‡´å››ä¸ªrouter-viewé¡µé¢å…±ç”¨ä¸€ä¸ªsecondpathIndexçš„å€¼,æ‰€ä»¥å‡ºç°bug 

   **è§£å†³**ï¼šæ¯æ¬¡å®ä¾‹é‡æ–°åˆ›å»ºä¹‹åï¼Œè·å–currtentIndexçš„æ•°å€¼ é€šè¿‡$route.path

   ```javascript
    this.currentIndex = this.navBarItem.findIndex(item =>{
         return item.path == this.$route.path
       })
   /-----------------------------------------------------------------/
   //ç¬¬äºŒç§
   this.navBarItem.forEach((item, index) => {
         if (decodeURI(this.$route.path).search(item.path) != -1) {
           this.activeNum = index;
         }.
         
    //decodeURI() å‡½æ•°èƒ½è§£ç ç”±encodeURI åˆ›å»ºæˆ–å…¶å®ƒæµç¨‹å¾—åˆ°çš„ç»Ÿä¸€èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ã€‚
   ```

### secondNav -Bar ç»„ä»¶  --------äºŒçº§router-viewä¸­çš„navbar

### listCard ç»„ä»¶  -------- æ­Œå•åˆ—è¡¨å±•ç¤ºç»„ä»¶

1. ä¸‹æ‹‰åŠ è½½æ›´å¤šå­˜åœ¨bug  -----------elementçš„æ— é™æ»šåŠ¨bug




## viewsç»„ä»¶

### discoverç»„ä»¶

#### recommendç»„ä»¶ -------æš‚æ— é—®é¢˜

1.  è½®æ’­å›¾
2. æ¨èæ­Œå•æ¨¡å—

#### musicListç»„ä»¶

1. æ­Œå•å¯¼èˆªæ åˆ—è¡¨ **å·¦è¾¹å¼¹å‡ºæ¡†éƒ¨åˆ†**å’Œ**å³è¾¹éƒ¨åˆ†**å…³è”

   **ä¸ç®¡æ˜¯å·¦ğŸ‘‰å³è¿˜æ˜¯å³ğŸ‘‰å·¦æœ€ç»ˆé€‰ä¸­çš„tag éƒ½æ˜¯currentTag**

   1. å·¦ğŸ‘‰å³
   
      ```javascript
      //ç‚¹å‡»å·¦è¾¹å¼¹å‡ºæ¡†å…ƒç´ 
      clickSortItme(item,index){
            // console.log(index);
            this.sortItemIndex = index
            this.currentTag = item;
            this.isPopoverShow = false
           //è·å–æ­Œå•
       }
      //ç„¶åå°†currentTag ä¼ å…¥å³è¾¹å¯¼èˆªæ åˆ¤æ–­æœ‰æ²¡æœ‰currentTagæ ‡ç­¾
   //å³è¾¹secondnavbar ç›‘å¬currentTagå±æ€§
       watch: {
       currentTag(current) {
            this.activeNum = this.SecondNavBarData.findIndex(
              (item) => item.name == current.name
            );
          },
      ```
      
   2. å³ğŸ‘‰å·¦
   
      ``` javascript
      //ç‚¹å‡»navbar ä¼ å‡ºäº‹ä»¶å‡½æ•°
       clickSecondBarItem(index) {
            this.activeNum = index;
            // console.log(this.activeNum,index);
            // å°†ç‚¹å‡»äº‹ä»¶å‘å°„å‡ºå» ä¾›ä½¿ç”¨æ”¹ç»„ä»¶æ¥æ”¶äº‹ä»¶ä½¿ç”¨
            this.$emit("clickSecondBarItem", index);
       }
      //çˆ¶ç»„ä»¶ä¸­
      clickSecondBarItem(index){
          //å½“å‰é€‰ä¸­currentTag ä¸ºHotTagList[index]
           this.currentTag = this.HotTagList[index]
      }
      ```
   
      
   
      





